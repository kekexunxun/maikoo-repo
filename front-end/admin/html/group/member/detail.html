<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <link rel="stylesheet" type="text/css" href="../../../static/h-ui/css/H-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../static/h-ui.admin/css/H-ui.admin.css" />
    <link rel="stylesheet" type="text/css" href="../../../lib/Hui-iconfont/1.0.9/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="../../../static/h-ui.admin/skin/default/skin.css" />
    <link rel="stylesheet" type="text/css" href="../../../static/h-ui.admin/css/style.css" />

    <title>同乡群成员列表</title>
</head>

<body class="pos-r">
    <nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 群组管理 <span class="c-gray en">&gt;</span> 群成员详情 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px"
           href="javascript:location.replace(location.href);" title="刷新"><i class="Hui-iconfont">&#xe68f;</i></a></nav>
    <!-- 群信息 -->
    <div class="cl pd-5 bg-1 bk-gray mt-20 lh-30">
        <div class="left-gap"><span id="name"></span></div>
        <div class="left-gap"><span id="gender"></span></div>
        <div class="left-gap"><span id="avatar"></span></div>
        <div class="left-gap"><span id="utype" hidden="hidden"></span></div>
        <div class="left-gap"><span id="status"></span></div>
        <div class="left-gap"><span id="utag" hidden="hidden"></span></div>
        <div class="left-gap"><span id="mobile"></span></div>
        <div class="left-gap"><span id="company"></span></div>
        <div class="left-gap"><span id="position"></span></div>
        <div class="left-gap"><span id="school" hidden="hidden"></span></div>
        <div class="left-gap"><span id="class"></span></div>
        <div class="left-gap"><span id="community" hidden="hidden"></span></div>
        <div class="left-gap"><span id="building" hidden="hidden"></span></div>
        <div class="left-gap"><span id="room" hidden="hidden"></span></div>
        <div class="left-gap"><span id="address"></span></div>
        <div class="left-gap"><span id="join"></span></div>
        <div class="left-gap"><span id="quit"></span></div>
        <div class="left-gap"><span id="brief"></span></div>
    </div>
</body>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="../../../lib/jquery/jquery-2.2.4.min.js"></script>
<script type="text/javascript" src="../../../lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="../../../static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="../../../static/h-ui.admin/js/H-ui.admin.js"></script>
<script type="text/javascript" src="../../../static/qyml/js/request.js"></script>
<!--/_footer 作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript">
    var url = location.search;
    var gtype = url.split('&')[0].split('=')[1];
    var gid = url.split('&')[1].split('=')[1];
    var uid = url.split('&')[2].split('=')[1];
    var gtypeArr = ['COUNTRY', 'SCHOOL', 'CLASS', 'COMMUNITY'];
    // 先请求群信息
    request('/admin/api/user/information', { groupType: gtypeArr[gtype], groupId: gid, userId: uid }, 300).then(res => {
        $('#name').text('成员名称：' + res.data.user_name);
        $('#gender').text('性别：' + (res.data.user_gender == "MALE" ? '男' : '女'));
        $('#avatar').html('头像：' + '<img class="avatar" src="' + res.data.user_avatar_url + '" width="80" height="80" />');
        $('#company').text('所在公司：' + res.data.user_company);
        $('#position').text('公司职位：' + res.data.user_position);
        if (gtype == 0) {
            $('#tag').show();
            $('#tag').text('年龄段：' + res.data.user_tag);
        } else if (gtype == 1) {
            $('#school').show();
            $('#utype').show();
            $('#school').text('学校名称：' + res.data.school_name);
            $('#utype').text('用户身份：' + (res.data.user_type == "STUDENT" ? '学生' : '教师'));
        } else if (gtype == 2) {
            $('#school').show();
            $('#class').show();
            $('#utype').show();
            $('#school').text('学校名称：' + res.data.school_name);
            $('#class').text('班级名称：' + res.data.class_name);
            $('#utype').text('用户身份：' + (res.data.user_type == "STUDENT" ? '学生' : '教师'));
        } else if (gtype == 3) {
            $('#community').show();
            $('#utype').show();
            $('#community').text('社区名称：' + res.data.community_name);
            if (res.data.user_type == "OWNER") {
                $('#building').show();
                $('#room').show();
                $('#building').text('楼幢号：' + res.data.user_building);
                $('#room').text('房间号：' + res.data.user_room);
            }
            $('#utype').text('用户身份：' + (res.data.user_type == "OWNER" ? '业主' : '物业'));
        }
        $('#status').text('状态：' + (res.data.status == "ENABLE" ? '使用中' : '已移除'));
        $('#join').text('加入时间：' + res.data.join_at);
        if (res.data.quit_at && res.data.quit_at != "") $('#quit').text('移除时间：' + res.data.quit_at);
        $('#brief').text('个人简介：' + res.data.user_brief);
    }).catch(error => {
        console.log(error);
        layer.msg(error.toString(), { icon: 2, time: 1300 });
    })
</script>

</html>