<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>超级矿工 - 我的矿池</title>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection" />
    <link rel="Bookmark" href="./favicon.ico">
    <link rel="Shortcut Icon" href="./favicon.ico" />
    <link rel="stylesheet" href="./css/ydui.css" />
    <link rel="stylesheet" href="./css/cjkg.css" />
    <script src="./js/ydui.flexible.js"></script>
</head>

<body>
    <section class="g-flexview">
        <!-- NavBar -->
        <header class="m-navbar">
            <div class="navbar-center"><span class="navbar-title">我的矿池</span></div>
        </header>
        <!-- Content -->
        <div class="g-scrollview scroll-after">
            <!-- List -->
            <article id="my-pool-list" class="m-list list-theme4">
            </article>
        </div>
        <!-- footer -->
        <footer class="m-tabbar">
            <a id="index" href="#" class="tabbar-item">
                <div class="tabbar-icon">
                    <img src="./img/footer/tab_home_nor.png" />
                </div>
                <span class="tabbar-txt">首页</span>
            </a>
            <a href="#" class="tabbar-item tabbar-active">
                <div class="tabbar-icon">
                    <img src="./img/footer/tab_pool_active.png" />
                </div>
                <span class="tabbar-txt">矿池</span>
            </a>
            <a id="wallet" href="#" class="tabbar-item">
                <div class="tabbar-icon">
                    <img src="./img/footer/tab_wallet_nor.png" />
                </div>
                <span class="tabbar-txt">钱包</span>
            </a>
            <a id="my" href="#" class="tabbar-item">
                <div class="tabbar-icon">
                    <img src="./img/footer/tab_me_nor.png" />
                </div>
                <span class="tabbar-txt">我的</span>
            </a>
        </footer>
    </section>
</body>
<!-- 引入jQuery 2.0+ -->
<script src="./js/jquery.min.js"></script>
<!-- 引入YDUI脚本 -->
<script src="./js/ydui.js"></script>
<!-- 引入NavJS -->
<script src="./js/nav.js"></script>
<!-- 引入RequestJS -->
<script src="./js/request.js"></script>
<script>
    $(function () {
        request('/api/customer/product', {}, 400).then(res => {
            if (res.data.length == 0) {
                YDUI.dialog.toast('暂无数据', 'error', 1300);
                $('#my-pool-list').text('快去购买一台矿机吧！');
                return;
            }
            // 初始化列表
            initList(res.data);
        }).catch(error => {
            console.log(error);
            YDUI.dialog.toast(error.toString(), 'error', 1300);
        })
        // 初始化我的矿机列表
        function initList(list) {
            let poolListHtml = "";
            for (let i = 0; i < list.length; i++) {
                poolListHtml += '<a onClick="navToPoolDetail(this)" href="javascript:;" class="list-item pool-list" data-sn="' + list[i].miner_sn + '">' +
                    '<div class="list-img">' +
                    '<img src="./img/miner/miner.png">' +
                    '</div >' +
                    '<div class="list-mes miner-list">' +
                    '<div class="list-line">' +
                    '<div class="line-title font-bold">名称：</div>' +
                    '<div class="line-content font-bold">' + list[i].miner_name + '</div>' +
                    '<div class="line-right"><img src="./img/icon_arrowright.png" alt=""></div>' +
                    '</div>' +
                    '<div class="list-line">' +
                    '<div class="line-title">编号：</div>' +
                    '<div class="line-content">' + list[i].miner_sn + '</div>' +
                    '</div>' +
                    '<div class="list-line">' +
                    '<div class="line-title">日期：</div>' +
                    '<div class="line-content">' + list[i].miner_date + '</div>' +
                    '</div>' +
                    '</div>' +
                    '</a>'
            }
            $('#my-pool-list').html(poolListHtml);
        }
    })
</script>

</html>