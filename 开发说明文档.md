天天应用商城开发文档
======
    一、项目概要
    天天应用商城是一个小程序合集，它是一个入口，通过这个入口可以直接跳转到其它的小程序。

    二、需求说明
        1. 模板参考「应用程序市场大全」小程序。
        2. 跳转规则
            根据微信现有跳转规则，一个小程序可绑定500个公众号，一个公众号可绑定13个小程序（3个非主体）。若两个小程序同绑定在一个公众号下，则可实现互相跳转。则一个小程序最多可跳转12 * 500个小程序。

    三、项目功能说明
	    1. 用户收藏功能（小程序、文章）
	    2. 小程序跳转功能

##接口文档说明

	baseUrl：https://minipro.up.maikoo.cn/mini/

###用户
 
    1. 当小程序用户无openid时发起信息查询请求
        请求地址：minibase/getUserOpenid
        请求参数：code
        请求方式：POST
        成功返回：{
                    "openid":"o3ep65c2yivD-P0TZTjClNkLiIGc",
                    "user": {
                        "user_openid":"o3ep65c2yivD-P0TZTjClNkLiIGc",
                        "userInfo": {
                            "nickName":"Leonado",
                            "gender":1,
                            "language":"en",
                            "city":"Chengdu",
                            "province":"Sichuan",
                            "country":"China",
                            "avatarUrl":"https://wx.qlogo.cn/mmopen/vi_32/PzsSx30z2qVxAyGlA48R6guqlKL3tDc6Suic9PiaALZC3PDTc4qqR3stbibviblIXLYAhy7HHibic3eMPdibJFrz8ib7EQ/132"
                        },
                        "isAuth":true,
                        "userID":"504"
                    },
                    "code":"200",
                    "message":"User Already Exist"
                }
    2. 当小程序用户有openid时发起请求
        请求地址：minibase/getUserAccountState
        请求参数：openid
        请求方式：POST
        成功返回：{
                    "data": {
                        "user_openid": "o3ep65c2yivD-P0TZTjClNkLiIGc",
                        "userInfo": {
                            "nickName": "Leonado",
                            "gender": 1,
                            "language": "en",
                            "city": "Chengdu",
                            "province": "Sichuan",
                            "country": "China",
                            "avatarUrl": "https://wx.qlogo.cn/mmopen/vi_32/PzsSx30z2qVxAyGlA48R6guqlKL3tDc6Suic9PiaALZC3PDTc4qqR3stbibviblIXLYAhy7HHibic3eMPdibJFrz8ib7EQ/132"
                        },
                        "isAuth": true,
                        "userID": "504"
                    },
                    "code": "200",
                    "msg": "Get Current User Success"
                }
    3. 获取小程序首页参数
        请求地址：shop/getShopInfo
        请求方式：GET
        成功返回：{
                    "banner": [{
                        "idx": 19,
                        "pic": "https://app.powerunion.cc/public/image/banner/20180710/01786259d3794e3d380f91736d24a993.jpg",
                        "navigate": 1,      // Banner跳转方式
                        "navigate_name": "转转二手交易网",
                        "navigate_id": 11
                    }],
                    "catagory": [{
                        "catagory_id": 2,
                        "father_id": 0,
                        "name": "电商平台",
                        "minis": [{
                            "mini_id": 16,
                            "appid": "wx6d828e699f8aef5f",
                            "name": "帮帮帮省钱",
                            "avatarUrl": "https://app.powerunion.cc/public/image/mini/bbbsq.jpg",
                            "brief": "网购达人公认的实惠购物打折神器！省钱又省心！帮帮帮省钱集聚免单、试用、福利、专享内部价、每日1元大量商品等于一身，丰富的打折产品和优惠活动，你可以以更低的价格购买到自己需要的产品。",
                            "pics": "/image/minipro/20180626/f910effd7d8250a5ea480898b63d15a4.png*/image/minipro/20180626/75326066acba2f7313486ebf2c52182c.png",
                            "intro": "        ",
                            "views": 0,
                            "catagory_id": 19,
                            "create_time": "2018-07-02 10:53:37",
                            "is_openable": 1
                        }]
                    }],
                    "column": [{
                        "idx": 26,
                        "pic": "https://app.powerunion.cc/public/image/column/20180626/e68db4dd0fcc87c84af0e09aa350eb78.jpg"
                    }]
                }

###专题

    1. 获取小程序首页参数获取全部专题
        请求地址：shop/getColumnList
        请求方式：POST
        请求参数：pageNum
        成功返回：{
                    "code": 0,
                    "msg": "success",
                    "data": [{
                        "idx": 26,
                        "pic": "https://app.powerunion.cc/public/image/column/20180626/e68db4dd0fcc87c84af0e09aa350eb78.jpg"
                    }]
                }

    2. 获取指定专题内容
        请求地址：shop/getColumnInfo
        请求方式：POST
        请求参数：columnid openid
        成功返回：{
                    "code": 0,
                    "msg": "success",
                    "data": {
                        "idx": 26,
                        "name": "假日旅行",
                        "brief": "假日旅行",
                        "pic": "https://app.powerunion.cc/public/image/column/20180626/e68db4dd0fcc87c84af0e09aa350eb78.jpg",
                        "minis": [{
                            "mini_id": "13",
                            "appid": "wx799d4d93a341b368",
                            "name": "去哪儿",
                            "avatarUrl": "https://app.powerunion.cc/public/image/mini/qnr.jpg",
                            "brief": "去哪儿旅游小程序，为用户的旅行提供机票、酒店、火车票、汽车票、门票预订、攻略等服务。",
                            "views": 492,
                            "catagory_id": 13,
                            "create_time": "2018-07-02 11:00:25",
                            "rate": "4.0",
                            "sort": "0",
                            "isFav": true,
                            "favIdx": 2
                        }],
                        "views": 100,
                        "create_time": "2018-06-27 12:24:52",
                        "isFav": false
                    }
                }
###分类

    1. 获取指定分类中的小程序
        请求地址：catagory/getUserCatagory
        请求方式：POST
        请求参数：catId openid
        成功返回：{
                    "code": 0,
                    "msg": "success",
                    "data": [{
                        "catagory_id": 7,
                        "father_id": 2,
                        "name": "汽车",
                        "father_name": "电商平台"
                    }, {
                        "catagory_id": 10,
                        "father_id": 2,
                        "name": "电商",
                        "father_name": "电商平台",
                        "minis": [{
                            "mini_id": 11,
                            "appid": "wx9df7443125e6f01a",
                            "avatarUrl": "https://app.powerunion.cc/public/image/mini/zz.jpg",
                            "path": "",
                            "name": "转转二手交易网",
                            "views": 4924,
                            "keywords": "二手 交易 闲置",
                            "catagory_id": 10,
                            "isFav": true,
                            "favIdx": 44
                        }]
                    }]
                }

    2. 获取全部的分类
        请求地址：catagory/getCatList
        请求方式：GET
        成功返回：{
	                "code": 0,
	                "msg": "success",
	                "data": [{
                        "catagory_id": 20,
                        "father_id": 4,
                        "name": "生活",
                        "pic": "https://app.powerunion.cc/public/image/catagory/20180709/5df4b98a5ac8fd3633569ab8a4f5cc73.jpg"
                    }, {
                        "catagory_id": 10,
                        "father_id": 2,
                        "name": "电商",
                        "pic": "https://app.powerunion.cc/public/image/catagory/20180709/efe89ba2f478361acd05bfe7b91b099f.jpg"
                    }]
                }

###搜索

    1. 获取系统设置的用户搜索列表
        请求地址：search/getList
        请求方式：GET
        成功返回：{
                    "code": 0,
                    "msg": "success",
                    "data": [{
                        "idx": 4,
                        "mini_id": 11,
                        "name": "转转二手交易网",
                        "appid": "wx9df7443125e6f01a",
                        "avatarUrl": "https://minipro.up.maikoo.cn/public/image/mini/zz.jpg"
                    }, {
                        "idx": 11,
                        "mini_id": 14,
                        "name": "中华万年历",
                        "appid": "wxf189826079e713e8",
                        "avatarUrl": "https://minipro.up.maikoo.cn/public/image/mini/wnl.jpg"
                    }]
                }

    2. 获取系统设置的用户搜索列表
        请求地址：search/getSearchReasult
        请求方式：POST
        请求参数：value（搜索关键词）
        成功返回：{
                    "code": 0,
                    "msg": "success",
                    "data": [{
                        "mini_id": 18,
                        "appid": "wxece3a9a4c82f58c9",
                        "path": "",
                        "name": "饿了么",
                        "avatarUrl": "https://minipro.up.maikoo.cn/public/image/mini/ele.jpg",
                        "keywords": "美食 外卖 订餐",
                        "views": 0
                    }]
                }
    
###文章

    1. 获取文章列表
        请求地址：article/getArticle
        请求方式：POST
        请求参数：
            articleType 0/1 文章类别 0 评测 1 资讯
            openid  用户openid
            pageNum 页码
            subId 子级ID 当articleType为1时必传
        成功返回：{
                    "code": 0,
                    "msg": "success",
                    "data": [{
                        "article_id": 1,
                        "title": "222222222",
                        "author": "22222222222",
                        "views": 122,
                        "create_time": "2018-07-13 13:59:08",
                        "pic": "https://minipro.up.maikoo.cn/public/image/article/20180713/52cdf411a109c837c6ffbcb3af4ea0f3.jpeg",
                        "brief": "2222222222222222"
                    }]
                }

###收藏

    1. 获取用户收藏列表
        请求地址：user/getUserFav
        请求方式：POST
        请求参数：
            favType 0/1 文章类别 0 专题 1 小程序
            openid  用户openid
            pageNum 页码
        成功返回：{
                    "code": 0,
                    "msg": "success",
                    "data": [{
                        "idx": 2,
                        "fav_id": 13,
                        "fav_type": 1,
                        "mini": {
                            "mini_id": 13,
                            "appid": "wx799d4d93a341b368",
                            "name": "去哪儿",
                            "avatarUrl": "https://minipro.up.maikoo.cn/public/image/mini/qnr.jpg",
                            "catagory_id": 13,
                            "keywords": "旅游 出行 订票"
                        },
                        "isFav": true
                    }, {
                        "idx": 7,
                        "fav_id": 16,
                        "fav_type": 1,
                        "mini": {
                            "mini_id": 16,
                            "appid": "wx6d828e699f8aef5f",
                            "name": "帮帮帮省钱",
                            "avatarUrl": "https://minipro.up.maikoo.cn/public/image/mini/bbbsq.jpg",
                            "catagory_id": 19,
                            "keywords": "购物 打折 优惠"
                        },
                        "isFav": true
                    }]
                }

    2. 用户取消收藏某个小程序
        请求地址：user/userCancelFav
        请求方式：POST
        请求参数：
            appid 小程序appid
            favId 小程序的id
            favType 收藏类别
            idx 收藏表中的自增ID
            openid 用户openid
        成功返回：{
                    "code": 0,
                    "msg": "success"
                }
    
    3. 用户收藏某个小程序
        请求地址：user/userAddFav
        请求方式：POST
        请求参数：
            appid 小程序appid
            favId 小程序的id
            favType 收藏类别
            idx 收藏表中的自增ID
            openid 用户openid
        成功返回：{
                    "code": 0,
                    "msg": "success",
                    "data": 7   //收藏表中的自增idx
                }