<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <!--[if lt IE 9]>
    <script type="text/javascript" src="__ROOT__/public/static/lib/html5shiv.js"></script>
    <script type="text/javascript" src="__ROOT__/public/static/lib/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="__ROOT__/static/lib/h-ui/css/H-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="__ROOT__/static/lib/h-ui.admin/css/H-ui.admin.css" />
    <link rel="stylesheet" type="text/css" href="__ROOT__/static/lib/Hui-iconfont/1.0.8/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="__ROOT__/static/lib/h-ui.admin/skin/default/skin.css" id="skin" />
    <link rel="stylesheet" type="text/css" href="__ROOT__/static/lib/h-ui.admin/css/style.css" />
    <!-- <link rel="stylesheet" type="text/css" href="static/css/demo.css" /> -->
    <!--[if IE 6]>
    <script type="text/javascript" src="__ROOT__/public/static/lib/DD_belatedPNG_0.0.8a-min.js" ></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <style>
        .Hui-iconfont{
            font-size: 15px;
        }
    </style>
    <title>用户统计</title>
</head>
<body>
<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 系统统计 <span class="c-gray en">&gt;</span> 打卡统计 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;</i></a></nav>
<div class="page-container">
    <div class="cl pd-5 bg-1 bk-gray mt-20">
        <span class="l">
            <label class="form-label col-xs-4 col-sm-6" style="margin-top: 5px;">选择课程：</label>
            <div class="formControls col-xs-8 col-sm-6">
                <select  name="course_id" id="course_id" style="font-size: 14px; height: 31px;line-height: 1.42857;padding: 4px;">
                    {volist name="$courseData" id="vol"}
                    <option value="{$vol.course_id}">{$vol.course_name}</option>                
                    {/volist}
                </select>                
            </div>
            <label class="form-label col-xs-4 col-sm-6" style="margin-top: 5px;">选择班级：</label>
            <div class="formControls col-xs-8 col-sm-6">
                <select  name="class_id" id="class_id" style="font-size: 14px; height: 31px;line-height: 1.42857;padding: 4px;">
                    
                </select>                 
            </div>
            <label class="form-label col-xs-4 col-sm-6" style="margin-top: 5px;">选择学生：</label>
            <div class="formControls col-xs-8 col-sm-6">
                <select  name="user" id="user" style="font-size: 14px; height: 31px;line-height: 1.42857;padding: 4px;">
                        
                </select>                
            </div>            
        </span>
    </div>    


    <div id="container" style="min-width:700px;min-height:400px;margin-top: 30px;"></div>
</div>
<footer class="footer mt-20">
    <div class="container">
    <p>Powered By 福建麦口信息科技有限公司</p>  
    </div>
</footer>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="__ROOT__/static/lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="__ROOT__/static/lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="__ROOT__/static/lib/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="__ROOT__/static/lib/h-ui.admin/js/H-ui.admin.js"></script>
<!--/_footer 作为公共模版分离出去-->
<!--请在下方写此页面业务相关的脚本--><!-- -->
<!-- <script type="text/javascript" src="__ROOT__/static/lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="__ROOT__/static/lib/datatables/1.10.16/jquery.dataTables.min.js"></script> -->
<script type="text/javascript" src="__ROOT__/static/lib/laypage/laypage.js"></script>
<script type="text/javascript" src="__ROOT__/static/lib/hcharts/Highcharts/5.0.6/js/highcharts.js"></script>
<script type="text/javascript" src="__ROOT__/static/lib/hcharts/Highcharts/5.0.6/js/modules/exporting.js"></script>
<!-- <script type="text/javascript" src="__ROOT__/static/js/userchart.js"></script> -->
<script type="text/javascript">




// 初始化图表数据
getChartData(0);

// AJAX获取图表数据
function getChartData(uid){
    $.ajax({
        data:{uid: uid },
        datatype: "POST",
        url: "userClockChart",
        success:function(res){
            // console.log(res);
            // 统计
            var height =  res.seriesData[0].data.length * 50;
            $('#container').css('height', height + 'px');
            showLineChart(res.xData, res.seriesData, res.title); 
        },
        error: function(){
            layer.msg('请求错误，请稍后重试!',{icon:2,time:1300});
        }
    });
}
// 折线图
function showLineChart(xData, seriesData, title){
    var chartOptions = {  
        chart: {
            type: 'line'
        },
        title: {
            text: title,
            x: -20 //center
        },
        // subtitle: {
        //     text: '数据来源: 本地'
        // },
        xAxis: {
            categories: xData,
            title: {
                text: '日期'
            },
            labels: {
                overflow: 'justify'
            }
        },
        yAxis: {
            min: 0,
            tickInterval: 1,
            title: {
                text: '打卡情况',
                align: 'high'
            },
            labels: {
                overflow: 'justify'
            }
        },
        tooltip: {
            // valueSuffix: ' 次'
            formatter: function() {  
                return this.x+'<br/><br/>'+'<b>'+this.series.name +' '+this.y+'次'+'</b>';
            } 
        },
        plotOptions: {
            line: {
                dataLabels: {
                    enabled: true,
                    allowOverlap: true  // 允许数据标签重叠
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -40,
            y: 0,
            floating: true,
            borderWidth: 0,
            // backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
            shadow: true
        },
        credits: {
            enabled: false
        },
        series: seriesData
    };
    // 图表初始化函数
    var chart = Highcharts.chart('container', chartOptions);        
}
// 设置默认参数
Highcharts.setOptions({
    lang: {
        printChart:['打印图表'],
        downloadJPEG:['导出JPEG图片'],
        downloadPDF:['导出PDF文件'],
        downloadPNG:['导出PNG图片'],
        downloadSVG:['导出SVG文件']
    }
});     
</script>
</body>
</html>